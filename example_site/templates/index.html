{% extends 'base.html'%}

{% block head %}
<link href={{ url_for('static', filename = 'main1.css') }} rel="stylesheet" type="text/css" media="all">
{% endblock %}

{% block body %}
<ul>
    <li><a class="active" href="/">Home</a></li>
    <li><a href="/left/">Left-Wing</a></li>
    <li><a href="/center/">Center</a></li>
    <li><a href="/right/">Right-Wing</a></li>
    <li><a href="/international/">International</a></li>
  </ul>
<div class = "content">
    <h1 style="text-align: center">Trending Stories</h1>
    <div class="row">
      {% for story in stories %}
      <div class="column">
         <div class="card">
          <h3><center><strong>{{ story.source_name }}</strong></center></h3>
          <div class="div1"><a href="{{ story.url }}" target="_blank"><figure><center><img style="width:100%" src= {{ story.image_url }}></figure></center><figcaption><b>{{ story.title }}</b></figcaption></a></div>
          <p style="font-size: 12px;"><i>{{ story.description }}</i><p>
        </div>
      </div>
      {% endfor %}
    </div>
    <div id = "notification" class ="cookie-banner-container">
      <p align="right">
        <input type="button" value="X" onclick="enableScroll(), myFunction()"/>
      </p>      
      <center>
      <p id="text">
        This website uses cookies.
      </p>
      <p id="text">
        Please look at our cookie policies.
      </p>
      <button type="button" onclick="enableScroll(), myFunction(), logEvent('click', 'cookie_button')">
        Accept cookies
      </button>
      <button type="button" id="button2">
        Do not sell my information
      </button>
      </center>
    </div>
    <script>
      function disableScroll() { 
    // Get the current page scroll position 
    scrollTop = window.pageYOffset || document.documentElement.scrollTop; 
    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft, 
  
        // if any scroll is attempted, set this to the previous value 
        window.onscroll = function() { 
            window.scrollTo(scrollLeft, scrollTop); 
        }; 
} 
  
function enableScroll() { 
    window.onscroll = function() {}; 
} 
    function determine_layout() {
      var left_right = Math.floor(Math.random() * 3);
      var up_down= Math.floor(Math.random() * 2);
      var versions=Math.floor(Math.random()*2)
      var x = document.getElementById("notification");
      var body=document.getElementById("body");
      var button2 = document.getElementById("button2");
      var screenWidth=window.innerWidth;
      var screenHeight=String(window.innerHeight -340)+"px";
      if (screenWidth<500){
        left_right=1;
      }
      if (String(left_right) == "0"){
        x.style.left = "10px";
        x.style.right="";
      }
      else if (String(left_right) == "1"){
        x.style.left = "24px";
        x.style.right="24px"
      }
      else if (String(left_right) == "2"){
        x.style.left = "";
        x.style.right="10px"
      }
      if (String(up_down) == "0"){
        x.style.bottom=screenHeight;
      }
      else if (String(up_down) =="1"){
        x.style.bottom="10px";
      }
      if (String(versions) == "0"){
        button2.innerHTML="Read our cookie policy"
        button2.setAttribute( "onClick", "javascript: readMore();" )
      }
      else{
        button2.innerHTML="Do not sell my information"
        button2.setAttribute( "onClick", "javascript: myFunction(), enableScroll();" )
      }
    }
    function readMore(){
      var test=window.innerHeight -300;
      var button2 = document.getElementById("button2");
      var text = document.getElementById("text");
      text.innerHTML=String(test);
      button2.innerHTML="Don't allow";
      button2.setAttribute( "onClick", "javascript: myFunction(), enableScroll();;" )
    }
      function myFunction() {
      var x = document.getElementById("notification");
      if (x.style.display === "none") {
        x.style.display = "block";
      } 
      else {
        x.style.display = "none";
      }
      }
    </script>
</div>
{% endblock %}