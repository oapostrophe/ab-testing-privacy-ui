{% extends 'base.html'%}

{% block head %}
<link href={{ url_for('static', filename = 'main1.css') }} rel="stylesheet" type="text/css" media="all">
<script>
function disableScroll() { 
  // Get the current page scroll position 
  scrollTop = window.pageYOffset || document.documentElement.scrollTop; 
  scrollLeft = window.pageXOffset || document.documentElement.scrollLeft, 
 
  // if any scroll is attempted, set this to the previous value 
  window.onscroll = function() { 
    window.scrollTo(scrollLeft, scrollTop); 
    }; 
} 
 
function enableScroll() { 
  window.onscroll = function() {}; 
} 
 
function determine_layout() {
  var x = document.getElementById("notification");
  var overlay=document.getElementById("myNav");
  var button1 = document.getElementById("button1");
  var button2 = document.getElementById("button2");
  var screenWidthString=String(window.innerWidth+100)+"px";
  var screenHeight=String(window.innerHeight -340)+"px";
  var bannerScreenHeight=String(window.innerHeight-200)+"px";
  var middleScreenHeight=String((window.innerHeight)/3)+"px";
  var acceptCookies = getCookie("acceptCookies")
  var form= document.getElementById("form");
  var toggle=document.getElementById("toggle");
  var one_button=document.getElementById("one_button");
  var form_input=document.getElementById("form_input")
  var button_and_link=document.getElementById("button_and_link");
  var link_choice=document.getElementById("link_choice");
  var link_text=document.getElementById("link_text");
  var mobile_button_and_link=document.getElementById("mobile_button_and_link");
  var link_in_text=document.getElementById("link_in_text");
  ///form.style.display="none";
  x.style.display="block";
  if (String(acceptCookies)=="1"){
    return;
  }
  if (mobile == false){
    x.style.left = "24px";
    x.style.right="24px";
    x.style.maxWidth=screenWidthString;
    x.style.bottom=bannerScreenHeight;
    if (String(desktopLayout) == "0"){
    }
    else if (String(desktopLayout) == "1"){
      button2.style.fontWeight="normal";
      button2.style.background="skyblue";
      button2.style.border="1px solid black"
      button1.style.background="darkblue";
      button1.style.border="1px solid white"
      button1.style.color="white";
    }
    else if (String(desktopLayout) == "2"){
      button2.setAttribute("onClick", "javascript: myForm(), logEvent('click', 'button_do_not_sell');");
    }
    else if (String(desktopLayout) == "3"){
      button2.setAttribute("onClick", "javascript: myToggle(), logEvent('click', 'button_do_not_sell');");
    }
    else if (String(desktopLayout) == "4"){
      x.style.display="none";
      var screenHeight=String(window.innerHeight -530)+"px";
      toggle.style.bottom=screenHeight;
      toggle.style.left = "";
      toggle.style.right="24px";
    }
    else if (String(desktopLayout) == "5"){
      x.style.display="none";
      one_button.style.bottom=screenHeight;
      one_button.style.left="";
      one_button.style.right="10px";
    }
    else if (String(desktopLayout)=="6"){
      x.style.display="none";
      bannerScreenHeight=String(window.innerHeight-130)+"px";
      button_and_link.style.bottom=bannerScreenHeight;
      button_and_link.style.maxWidth=screenWidthString;
      button_and_link.style.left="10px";
      button_and_link.style.right="10px";
    }
    else if (String(desktopLayout)=="7"){
      x.style.display="none";
      link_text.style.bottom=bannerScreenHeight;
      link_text.style.maxWidth=screenWidthString;
      link_text.style.left="10px";
      link_text.style.right="10px";
    }
  }
  else{
    x.style.bottom=screenHeight
    x.style.left = "24px";
    x.style.right="24px";
    if (String(mobileLayout)=="0"){
      
    }
    else if (String(mobileLayout)=="1"){
      button2.style.fontWeight="normal";
      button2.style.background="skyblue";
      button2.style.border="1px solid black"
      button1.style.background="darkblue";
      button1.style.border="1px solid white";
      button1.style.color="white";
    }
    else if (String(mobileLayout)=="2"){
      form.style.maxWidth="310px";
      button2.setAttribute("onClick", "javascript: myForm(), logEvent('click', 'button_do_not_sell')");
      form_input.setAttribute("onClick", "javascript: myFixForm()");
      one_button.style.display="none";
    }
    else if (String(mobileLayout)=="3"){
      button2.setAttribute("onClick", "javascript: myMobileToggle(), logEvent('click', 'button_do_not_sell');");

    }
    else if (String(mobileLayout)=="4"){
      x.style.display="none";
      var screenHeight=String(window.innerHeight -600)+"px";
      toggle.style.bottom=screenHeight;
      toggle.style.left = "";
      toggle.style.right="24px";
    }
    else if (String(mobileLayout)=="5"){
      x.style.display="none";
      one_button.style.bottom=screenHeight;
      one_button.style.maxWidth="300px";
      one_button.style.left="10px";
      one_button.style.right="10px";
    }
    else if (String(mobileLayout)=="6"){
      x.style.display="none";
      mobile_button_and_link.style.bottom=screenHeight;
      mobile_button_and_link.style.maxWidth="275px";
      link_choice.setAttribute("onClick", "javascript: myMobileToggle(), logEvent('click', 'button_do_not_sell');");
      mobile_button_and_link.style.left="24px";
      mobile_button_and_link.style.right="24px";
    }
    else if (String(mobileLayout)=="7"){
      x.style.display="none";
      link_in_text.setAttribute("onClick", "javascript: myMobileToggle(), logEvent('click', 'button_do_not_sell');");
      link_text.style.bottom=screenHeight;
      link_text.style.maxWidth="310px";
      link_text.style.left="10px";
      link_text.style.right="10px";
    }
  }
}
 
function linkClicked(){
  var x = document.getElementById("notification");
  var middleScreenHeight=String((window.innerHeight)/3)+"px"
  x.style.display="block";
  x.style.bottom=middleScreenHeight;
  x.style.left = "24px";
  x.style.right="24px";
  x.style.maxWidth="400px";
}
 
function endOverlay(){
  var overlay=document.getElementById("myNav");
  overlay.style.display="none"
}
function readMore(){
  var link_accept=document.getElementById("link_accept")
  var button0=document.getElementById("button0");
  var button1=document.getElementById("button1");
  var button2 = document.getElementById("button2");
  var options= document.getElementById("options");
  var text = document.getElementById("text");
  text.innerHTML="Under the California Consumer Privacy Act, you have the right to opt-out of the sale of your personal information to third parties. You may exercise your right to opt out of the sale of personal information by clicking the 'Deny Cookies' button.";
  button1.style.display="none";
  button2.style.display="none";
  options.style.display="block";
  button0.style.display="block";
  link_accept.style.display="none";
  ///button2.innerHTML="Don't allow";
  ///button2.setAttribute( "onClick", "javascript: myFunction(), enableScroll(), endOverlay();" )
}
function myClose() {
  document.cookie="acceptCookies=1; path=/; ";
  var x=document.getElementById("notification");
  var overlay=document.getElementById("myNav");
  var form=document.getElementById("form");
  var toggle=document.getElementById("toggle");
  var one_button=document.getElementById("one_button");
  var button_and_link=document.getElementById("button_and_link");
  var link_text=document.getElementById("link_text");
  var mobile_button_and_link=document.getElementById("mobile_button_and_link");
  x.style.display="none";
  form.style.display="none";
  toggle.style.display="none";
  one_button.style.display="none";
  overlay.style.display="none";
  button_and_link.style.display="none";
  link_text.style.display="none";
  mobile_button_and_link.style.display="none";
}
function myFunction() {
  document.cookie="acceptCookies=1; path=/; ";
  var toggle=document.getElementById("toggle");
  var form=document.getElementById("form");
  var x = document.getElementById("notification");
  toggle.style.display="none";
  form.style.display="none";
  if (x.style.display === "none") {
    x.style.display = "block";
  } 
  else {
    x.style.display = "none";
  }
}
function myFixForm(){
  var toggle=document.getElementById("toggle");
  toggle.style.display="none";
  var middleScreenHeight=String((window.innerHeight)/3-150)+"px";
  var form=document.getElementById("form");
  form.style.bottom=middleScreenHeight;
}
function myForm(){
  var x= document.getElementById("notification");
  var overlay=document.getElementById("myNav")
  overlay.style.display="block";
  x.style.display="none";
  var middleScreenHeight=String((window.innerHeight)/3-50)+"px";
  var screenHeight=String(window.innerHeight -530)+"px";
  var form=document.getElementById("form");
  form.style.bottom=middleScreenHeight;
  form.style.left = "10px";
  form.style.right="10px";
}
function myToggle(){
  var x = document.getElementById("notification");
  var overlay=document.getElementById("myNav")
  overlay.style.display="block";
  x.style.display="none";
  var screenHeight=String(window.innerHeight -600)+"px";
  var middleScreenHeight=String((window.innerHeight)/3-100)+"px";
  var toggle=document.getElementById("toggle");
  toggle.style.bottom=middleScreenHeight;
  toggle.style.left = "24px";
  toggle.style.right="24px";
}
function myMobileToggle(){
  var x = document.getElementById("notification");
  var overlay=document.getElementById("myNav")
  overlay.style.display="block";
  x.style.display="none";
  var screenHeight=String(window.innerHeight -750)+"px";
  var middleScreenHeight=String(((window.innerHeight)/3)-100)+"px";
  var toggle=document.getElementById("toggle");
  toggle.style.bottom=middleScreenHeight;
  toggle.style.left = "24px";
  toggle.style.right="24px";
}
function myDirectToggle(){
  var x = document.getElementById("notification");
  x.style.display="none";
  var screenHeight=String(window.innerHeight -530)+"px";
  var middleScreenHeight=String((window.innerHeight)/3)+"px";
  var toggle=document.getElementById("toggle");
  toggle.style.bottom=screenHeight;
  toggle.style.left = "";
  toggle.style.right="24px";
}
 
 
function one_button(){
  var x=document.getElementById("notification")
  var screenHeight=String(window.innerHeight -350)+"px";
  var middleScreenHeight=String((window.innerHeight)/3)+"px";
  var one_button=document.getElementById("one_button");
  x.style.display="none";
  one_button.style.bottom=screenHeight;
  one_button.style.left="";
  one_button.style.right="10px";
}
    
function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
</script>
{% endblock %}
{% block body %}
<ul>
    <li><a href="/">Home</a></li>
    <li><a href="/left/">Left-Wing</a></li>
    <li><a href="/center/">Center</a></li>
    <li><a class="active" href="/right/">Right-Wing</a></li>
    <li><a href="/international/">International</a></li>
  </ul>
  <div id="myNav" class="overlay">
    <div class="overlay-content">
    </div>
  </div>
  <div class = "content">
    <h1 style="text-align: center">Trending Stories</h1>
    <div class="row">
      {% for story in stories %}
      <div class="column">
         <div class="card">
          <h3><center><strong>{{ story.source_name }}</strong></center></h3>
          <div class="div1" onclick="logBeacon('click', '{{ story.url }}');"><a href="{{ story.url }}" target="_blank"><figure><center><img style="width:100%" src= {{ story.image_url }}></figure></center><figcaption><b>{{ story.title }}</b></figcaption></a></div>
          <p style="font-size: 12px;"><i>{{ story.description }}</i><p>
        </div>
      </div>
      {% endfor %}
    </div><center>
      <div id = "notification" class ="cookie-banner-container">
        <span class="close" onclick="myClose(), logEvent('click', 'button_x');"> ✕ </span>
        <p id="text" style="font-size:12px;">
          California residents have certain rights with regard to the sale of personal information to third parties. We use information collected through cookies or in other forms to improve experience on our site and pages, analyze how it is used and show personalized advertising.  At any point, you can opt out of the sale of all of your personal information by pressing "Do not sell my personal information". You can find more in our <a target="_blank" href="/privacypolicy/" onclick="logBeacon('click', 'link_privacy_policy');" class = "link_in_text">Privacy Policy</a>
        </p>
        <button style="min-width: 315px" type="button" id="button1" onclick="myFunction(), logEvent('click', 'button_accept_cookies');">
          Accept cookies
        </button>
        <button style="min-width: 315px" type="button" id="button2"  onclick="myFunction(), logEvent('click', 'button_do_not_sell');">
          Do not sell my information
        </button>
        </center>
      </div>
      <div id= "form" class="cookie-banner-container" style="z-index: 1000;">
        <span class="close" onclick= "myClose(), logEvent('click', 'button_x_form');"> ✕ </span>
        <center><b style="font-size: 24px;">California Consumer Privacy Opt-Out provision (Act)</b></center>
        <p>By submitting this request you are exercising your right to Opt Out of sale of your personal information. To learn more about what kinds of information we gather in connection with this website and/or its associated services, please consult our <a target="_blank" href="/privacypolicy/" class = "link_in_text" onclick="logBeacon('click', 'link_privacy_policy')">Privacy Policy</a></p>
        <label for="fname">Email:</label>
        <input type="text" id="form_input" name="fname" value=""><br>
        <br>
        <label for="yes_no_radio">Are you a California resident?</label>
        <p> <input style="font-size: 12px;" type="radio" name="yes_no" value="ca_resident_yes">Yes</input></p>
        <p><input style="font-size: 12px;" type="radio" name="yes_no" value="ca_resident_no">No</input></p>
        <center><button style="display:block" type="button" onclick="myClose(), logEvent('click', 'submit_form'), logEvent('form_input', checkValidEmail(document.getElementById('form_input').value)), logEvent('form_input', getRadioInput('yes_no'));">
          Submit response
        </button>
        </center>
      </div>
      <div id="toggle" class="cookie-banner-container" style="z-index: 1000;">
        <span class="close" onclick="myClose(), logEvent('click', 'button_x_toggle');"> ✕ </span>
        <p id="text">
          California residents have certain rights with regard to the sale of personal information to third parties. We use information collected through cookies or in other forms to improve experience on our site and pages, analyze how it is used and show personalized advertising. You can opt out of the sale of your personal information for each purpose through changing its corresponding toggle to the left.  You can find out more in our <a target="_blank" href="/privacypolicy/" onclick="logBeacon('click', 'link_privacy_policy');" class="link_in_text">Privacy Policy</a>.
        </p>
        <table>
          <tr>
            <td>
              Personalized Advertising
            </td>
            <td>
              <label class="switch"><input type="checkbox" checked onclick="logEvent('click', 'slider_personalized_advertising');"><span class="slider"></span></label>
            </td>
          </tr>
          <tr>
            <td>
              Analytics
            </td>
            <td>
              <label class="switch"><input type="checkbox" checked onclick="logEvent('click', 'slider_analytics');"><span class="slider"></span></label>
            </td>
          </tr>
          <tr>
            <td>
              Content Personalization
            </td>
            <td>
              <label class="switch"><input type="checkbox" checked onclick="logEvent('click', 'slider_social_media');"><span class="slider"></span></label>
            </td>
          </tr>
        </table>
        <center><button style="display:block" type="button" onclick="myClose(), logEvent('click', 'button_submit_response');">
          Submit response
        </button></center>  
      </div>
      <div id="one_button" class="cookie-banner-container">
        <span class="close" onclick="myClose(), logEvent('click', 'button_x');"> ✕ </span><center>
          California residents have certain rights with regard to the sale of personal information to third parties. We use information collected through cookies or in other forms to improve experience on our site and pages, analyze how it is used and show personalized advertising.  At any point, you can opt out of the sale of all of your personal information by pressing "Do not sell my personal information". You can find more in our <a target="_blank" href="/privacypolicy/" onclick="logBeacon('click', 'link_privacy_policy');" class = "link_in_text">Privacy Policy</a>
        <button style="display:block" type="button" onclick="myClose(), logEvent('click', 'button_do_not_sell');">
          Do Not Sell My Information
        </button></center>  
      </div>
      <div id="button_and_link" class="cookie-banner-container">
        <span class="close" onclick="myClose(), logEvent('click', 'button_x');"> ✕ </span>
          <table>
            <tr>
              <td>
                <p id="text" style="font-size:12px;">
                  California residents have certain rights with regard to the sale of personal information to third parties. We use information collected through cookies or in other forms to improve experience on our site and pages, analyze how it is used and show personalized advertising.  At any point, you can opt out of the sale of all of your personal information by pressing "Do not sell my personal information". You can find more in our <a target="_blank" href="/privacypolicy/" onclick="logBeacon('click', 'link_privacy_policy');" class = "link_in_text">Privacy Policy</a>
                  </p>
              </td>
              <td style="width:220px; padding: 0 15px;">
                <button style="display:block;" type="button"  onclick="myClose(), logEvent('click', 'button_accept_cookies');">
                  Accept Cookies
                </button>
              </td>
              <td style="width:200px; padding: 0 15px;">
                <a class="policy" onclick="myToggle(), logEvent('click', 'button_do_not_sell');">Do Not Sell My Information</a>
              </td>
            </tr>
          </table> 
      </div>
      <div id="link_text" class="cookie-banner-container">
        <span class="close" onclick="myClose(), logEvent('click', 'button_x');"> ✕ </span>
        California residents have certain rights with regard to the sale of personal information to third parties. We use information collected through cookies or in other forms to improve experience on our site and pages, analyze how it is used and show personalized advertising. <a id="link_in_text" class="policy" style="text-decoration: underline;"onclick="myToggle(), logEvent('click', 'button_do_not_sell');">More Info</a>
        <center><button style="display:block" type="button" onclick="myClose(), logEvent('click', 'button_accept_cookies');">
          Accept Cookies
        </button></center>
      </div>
        <div id="mobile_button_and_link" class="cookie-banner-container"><center>
          <span class="close" onclick="myClose(), logEvent('click', 'button_x');"> ✕ </span>
            <p id="text" style="font-size:12px;">
              California residents have certain rights with regard to the sale of personal information to third parties. We use information collected through cookies or in other forms to improve experience on our site and pages, analyze how it is used and show personalized advertising.  At any point, you can opt out of the sale of all of your personal information by pressing "Do not sell my personal information". You can find more in our <a target="_blank" href="/privacypolicy/" onclick="logBeacon('click', 'link_privacy_policy');" class = "link_in_text">Privacy Policy</a>
            </p>
            <button style="display:block;" type="button"  onclick="myClose(), logEvent('click', 'button_accept_cookies');">
              Accept Cookies
            </button>
            <a class="policy" onclick="myToggle(), logEvent('click', 'button_do_not_sell');">Do Not Sell My Information</a></center>
        </div>
  </div>
  <div class="footer">
    <p><a target="_blank" href="/privacypolicy/" onclick="logBeacon('click', 'link_privacy_policy')">Privacy Policy</a> &nbsp; &nbsp;&nbsp; <a class="policy" onclick="linkClicked(), logEvent('click', 'link_do_not_sell');">Do Not Sell My Personal Information</a></p>
  </div>
  {% endblock %}
   
  
  